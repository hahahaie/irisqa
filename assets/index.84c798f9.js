import{u as xe,j as Fe,k as Pe,l as dt,m as _,q as I,s as re,x as ne,y as Ee,z as U,A as Re,B as P,C as je,D as ce,E as ft,G as vt,H as mt,I as ht,J as G,K as M,L as p,M as F,g as u,N as O,O as R,P as B,Q as le,R as gt,S as N,U as yt,V as ee,W as Ve,X as be,Y as Be,T as Ue,Z as wt,a as _e,v as Ge,$ as xt,F as bt,a0 as St,a1 as Pt,a2 as Ke,a3 as Ct,a4 as H,a5 as V,a6 as It,a7 as Le,a8 as fe,a9 as Tt,aa as $t}from"./index.376b67c7.js";var oe=typeof window<"u";function Se(e){return oe?requestAnimationFrame(e):-1}function kt(e){oe&&cancelAnimationFrame(e)}function ve(e){Se(()=>Se(e))}var zt=e=>e===window,De=(e,t)=>({top:0,left:0,right:e,bottom:t,width:e,height:t}),Ot=e=>{const t=xe(e);if(zt(t)){const o=t.innerWidth,n=t.innerHeight;return De(o,n)}return t!=null&&t.getBoundingClientRect?t.getBoundingClientRect():De(0,0)};function Et(e){const t=Re(e,null);if(t){const o=ce(),{link:n,unlink:i,internalChildren:a}=t;n(o),Fe(()=>i(o));const l=P(()=>a.indexOf(o));return{parent:t,index:l}}return{parent:null,index:I(-1)}}function Rt(e){const t=[],o=n=>{Array.isArray(n)&&n.forEach(i=>{var a;ft(i)&&(t.push(i),(a=i.component)!=null&&a.subTree&&(t.push(i.component.subTree),o(i.component.subTree.children)),i.children&&o(i.children))})};return o(e),t}var Me=(e,t)=>{const o=e.indexOf(t);return o===-1?e.findIndex(n=>t.key!==void 0&&t.key!==null&&n.type===t.type&&n.key===t.key):o};function Bt(e,t,o){const n=Rt(e.subTree.children);o.sort((a,l)=>Me(n,a.vnode)-Me(n,l.vnode));const i=o.map(a=>a.proxy);t.sort((a,l)=>{const c=i.indexOf(a),h=i.indexOf(l);return c-h})}function _t(e){const t=U([]),o=U([]),n=ce();return{children:t,linkChildren:a=>{je(e,Object.assign({link:h=>{h.proxy&&(o.push(h),t.push(h.proxy),Bt(n,t,o))},unlink:h=>{const s=o.indexOf(h);t.splice(s,1),o.splice(s,1)},children:t,internalChildren:o},a))}}}function qe(e){let t;re(()=>{e(),ne(()=>{t=!0})}),Ee(()=>{t&&e()})}function Ce(e,t,o={}){if(!oe)return;const{target:n=window,passive:i=!1,capture:a=!1}=o;let l=!1,c;const h=r=>{if(l)return;const m=xe(r);m&&!c&&(m.addEventListener(e,t,{capture:a,passive:i}),c=!0)},s=r=>{if(l)return;const m=xe(r);m&&c&&(m.removeEventListener(e,t,a),c=!1)};Fe(()=>s(n)),Pe(()=>s(n)),qe(()=>h(n));let v;return dt(n)&&(v=_(n,(r,m)=>{s(m),h(r)})),()=>{v==null||v(),s(n),l=!0}}var me,ke;function At(){if(!me&&(me=I(0),ke=I(0),oe)){const e=()=>{me.value=window.innerWidth,ke.value=window.innerHeight};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0})}return{width:me,height:ke}}var Lt=/scroll|auto|overlay/i,Dt=oe?window:void 0;function Mt(e){return e.tagName!=="HTML"&&e.tagName!=="BODY"&&e.nodeType===1}function pt(e,t=Dt){let o=e;for(;o&&o!==t&&Mt(o);){const{overflowY:n}=window.getComputedStyle(o);if(Lt.test(n))return o;o=o.parentNode}return t}var he;function Yt(){if(!he&&(he=I("visible"),oe)){const e=()=>{he.value=document.hidden?"hidden":"visible"};e(),window.addEventListener("visibilitychange",e)}return he}vt();const Nt=e=>e.stopPropagation();function te(e,t){(typeof e.cancelable!="boolean"||e.cancelable)&&e.preventDefault(),t&&Nt(e)}function pe(e){const t=xe(e);if(!t)return!1;const o=window.getComputedStyle(t),n=o.display==="none",i=t.offsetParent===null&&o.position!=="fixed";return n||i}const{width:Je,height:Qe}=At(),Xt="van-hairline",Wt=`${Xt}--surround`,et="van-haptics-feedback";function tt(e,{args:t=[],done:o,canceled:n}){if(e){const i=e.apply(null,t);mt(i)?i.then(a=>{a?o():n&&n()}).catch(ht):i?o():n&&n()}else o()}const nt=Symbol();function Ht(e){const t=Re(nt,null);t&&_(t,o=>{o&&e()})}function ue(e){const t=ce();t&&G(t.proxy,e)}const Zt={to:[String,Object],url:String,replace:Boolean};function Ft({to:e,url:t,replace:o,$router:n}){e&&n?n[o?"replace":"push"](e):t&&(o?location.replace(t):location.href=t)}function jt(){const e=ce().proxy;return()=>Ft(e)}const[Vt,Ye]=M("badge"),Ut={dot:Boolean,max:O,tag:R("div"),color:String,offset:Array,content:O,showZero:B,position:R("top-right")};var Gt=p({name:Vt,props:Ut,setup(e,{slots:t}){const o=()=>{if(t.content)return!0;const{content:l,showZero:c}=e;return le(l)&&l!==""&&(c||l!==0&&l!=="0")},n=()=>{const{dot:l,max:c,content:h}=e;if(!l&&o())return t.content?t.content():le(c)&&gt(h)&&+h>c?`${c}+`:h},i=P(()=>{const l={background:e.color};if(e.offset){const[c,h]=e.offset;t.default?(l.top=F(h),typeof c=="number"?l.right=F(-c):l.right=c.startsWith("-")?c.replace("-",""):`-${c}`):(l.marginTop=F(h),l.marginLeft=F(c))}return l}),a=()=>{if(o()||e.dot)return u("div",{class:Ye([e.position,{dot:e.dot,fixed:!!t.default}]),style:i.value},[n()])};return()=>{if(t.default){const{tag:l}=e;return u(l,{class:Ye("wrapper")},{default:()=>[t.default(),a()]})}return a()}}});const Kt=N(Gt),[qt,Ne]=M("icon"),Jt=e=>e==null?void 0:e.includes("/"),Qt={dot:Boolean,tag:R("i"),name:String,size:O,badge:O,color:String,badgeProps:Object,classPrefix:String};var en=p({name:qt,props:Qt,setup(e,{slots:t}){const o=Re(yt,null),n=P(()=>e.classPrefix||(o==null?void 0:o.iconPrefix)||Ne());return()=>{const{tag:i,dot:a,name:l,size:c,badge:h,color:s}=e,v=Jt(l);return u(Kt,ee({dot:a,tag:i,class:[n.value,v?"":`${n.value}-${l}`],style:{color:s,fontSize:F(c)},content:h},e.badgeProps),{default:()=>{var r;return[(r=t.default)==null?void 0:r.call(t),v&&u("img",{class:Ne("image"),src:l},null)]}})}}});const Ie=N(en),[tn,se]=M("loading"),nn=Array(12).fill(null).map((e,t)=>u("i",{class:se("line",String(t+1))},null)),on=u("svg",{class:se("circular"),viewBox:"25 25 50 50"},[u("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),an={size:O,type:R("circular"),color:String,vertical:Boolean,textSize:O,textColor:String};var sn=p({name:tn,props:an,setup(e,{slots:t}){const o=P(()=>G({color:e.color},Ve(e.size))),n=()=>{var i;if(t.default)return u("span",{class:se("text"),style:{fontSize:F(e.textSize),color:(i=e.textColor)!=null?i:e.color}},[t.default()])};return()=>{const{type:i,vertical:a}=e;return u("div",{class:se([i,{vertical:a}]),"aria-live":"polite","aria-busy":!0},[u("span",{class:se("spinner",i),style:o.value},[i==="spinner"?nn:on]),n()])}}});const ot=N(sn),[ln,q]=M("button"),rn=G({},Zt,{tag:R("button"),text:String,icon:String,type:R("default"),size:R("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:R("button"),loadingSize:O,loadingText:String,loadingType:String,iconPosition:R("left")});var cn=p({name:ln,props:rn,emits:["click"],setup(e,{emit:t,slots:o}){const n=jt(),i=()=>o.loading?o.loading():u(ot,{size:e.loadingSize,type:e.loadingType,class:q("loading")},null),a=()=>{if(e.loading)return i();if(o.icon)return u("div",{class:q("icon")},[o.icon()]);if(e.icon)return u(Ie,{name:e.icon,class:q("icon"),classPrefix:e.iconPrefix},null)},l=()=>{let s;if(e.loading?s=e.loadingText:s=o.default?o.default():e.text,s)return u("span",{class:q("text")},[s])},c=()=>{const{color:s,plain:v}=e;if(s){const r={color:v?s:"white"};return v||(r.background=s),s.includes("gradient")?r.border=0:r.borderColor=s,r}},h=s=>{e.loading?te(s):e.disabled||(t("click",s),n())};return()=>{const{tag:s,type:v,size:r,block:m,round:x,plain:w,square:f,loading:g,disabled:T,hairline:$,nativeType:X,iconPosition:k}=e,S=[q([v,r,{plain:w,block:m,round:x,square:f,loading:g,disabled:T,hairline:$}]),{[Wt]:$}];return u(s,{type:X,class:S,style:c(),disabled:T,onClick:h},{default:()=>[u("div",{class:q("content")},[k==="left"&&a(),l(),k==="right"&&a()])]})}}});const Vn=N(cn),un={show:Boolean,zIndex:O,overlay:B,duration:O,teleport:[String,Object],lockScroll:B,lazyRender:B,beforeClose:Function,overlayStyle:Object,overlayClass:be,transitionAppear:Boolean,closeOnClickOverlay:B};function dn(e,t){return e>t?"horizontal":t>e?"vertical":""}function Ae(){const e=I(0),t=I(0),o=I(0),n=I(0),i=I(0),a=I(0),l=I(""),c=()=>l.value==="vertical",h=()=>l.value==="horizontal",s=()=>{o.value=0,n.value=0,i.value=0,a.value=0,l.value=""};return{move:m=>{const x=m.touches[0];o.value=(x.clientX<0?0:x.clientX)-e.value,n.value=x.clientY-t.value,i.value=Math.abs(o.value),a.value=Math.abs(n.value);const w=10;(!l.value||i.value<w&&a.value<w)&&(l.value=dn(i.value,a.value))},start:m=>{s(),e.value=m.touches[0].clientX,t.value=m.touches[0].clientY},reset:s,startX:e,startY:t,deltaX:o,deltaY:n,offsetX:i,offsetY:a,direction:l,isVertical:c,isHorizontal:h}}let ie=0;const Xe="van-overflow-hidden";function fn(e,t){const o=Ae(),n="01",i="10",a=v=>{o.move(v);const r=o.deltaY.value>0?i:n,m=pt(v.target,e.value),{scrollHeight:x,offsetHeight:w,scrollTop:f}=m;let g="11";f===0?g=w>=x?"00":"01":f+w>=x&&(g="10"),g!=="11"&&o.isVertical()&&!(parseInt(g,2)&parseInt(r,2))&&te(v,!0)},l=()=>{document.addEventListener("touchstart",o.start),document.addEventListener("touchmove",a,{passive:!1}),ie||document.body.classList.add(Xe),ie++},c=()=>{ie&&(document.removeEventListener("touchstart",o.start),document.removeEventListener("touchmove",a),ie--,ie||document.body.classList.remove(Xe))},h=()=>t()&&l(),s=()=>t()&&c();qe(h),Pe(s),Be(s),_(t,v=>{v?l():c()})}function at(e){const t=I(!1);return _(e,o=>{o&&(t.value=o)},{immediate:!0}),o=>()=>t.value?o():null}const[vn,mn]=M("overlay"),hn={show:Boolean,zIndex:O,duration:O,className:be,lockScroll:B,lazyRender:B,customStyle:Object};var gn=p({name:vn,props:hn,setup(e,{slots:t}){const o=I(),n=at(()=>e.show||!e.lazyRender),i=l=>{e.lockScroll&&te(l,!0)},a=n(()=>{var l;const c=G(wt(e.zIndex),e.customStyle);return le(e.duration)&&(c.animationDuration=`${e.duration}s`),_e(u("div",{ref:o,style:c,class:[mn(),e.className]},[(l=t.default)==null?void 0:l.call(t)]),[[Ge,e.show]])});return Ce("touchmove",i,{target:o}),()=>u(Ue,{name:"van-fade",appear:!0},{default:a})}});const yn=N(gn),wn=G({},un,{round:Boolean,position:R("center"),closeIcon:R("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:R("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[xn,We]=M("popup");var bn=p({name:xn,inheritAttrs:!1,props:wn,emits:["open","close","opened","closed","keydown","update:show","click-overlay","click-close-icon"],setup(e,{emit:t,attrs:o,slots:n}){let i,a;const l=I(),c=I(),h=at(()=>e.show||!e.lazyRender),s=P(()=>{const S={zIndex:l.value};if(le(e.duration)){const L=e.position==="center"?"animationDuration":"transitionDuration";S[L]=`${e.duration}s`}return S}),v=()=>{i||(i=!0,l.value=e.zIndex!==void 0?+e.zIndex:St(),t("open"))},r=()=>{i&&tt(e.beforeClose,{done(){i=!1,t("close"),t("update:show",!1)}})},m=S=>{t("click-overlay",S),e.closeOnClickOverlay&&r()},x=()=>{if(e.overlay)return u(yn,{show:e.show,class:e.overlayClass,zIndex:l.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0,onClick:m},{default:n["overlay-content"]})},w=S=>{t("click-close-icon",S),r()},f=()=>{if(e.closeable)return u(Ie,{role:"button",tabindex:0,name:e.closeIcon,class:[We("close-icon",e.closeIconPosition),et],classPrefix:e.iconPrefix,onClick:w},null)},g=()=>t("opened"),T=()=>t("closed"),$=S=>t("keydown",S),X=h(()=>{var S;const{round:L,position:W,safeAreaInsetTop:j,safeAreaInsetBottom:d}=e;return _e(u("div",ee({ref:c,style:s.value,role:"dialog",tabindex:0,class:[We({round:L,[W]:W}),{"van-safe-area-top":j,"van-safe-area-bottom":d}],onKeydown:$},o),[(S=n.default)==null?void 0:S.call(n),f()]),[[Ge,e.show]])}),k=()=>{const{position:S,transition:L,transitionAppear:W}=e,j=S==="center"?"van-fade":`van-popup-slide-${S}`;return u(Ue,{name:L||j,appear:W,onAfterEnter:g,onAfterLeave:T},{default:X})};return _(()=>e.show,S=>{S&&!i&&(v(),o.tabindex===0&&ne(()=>{var L;(L=c.value)==null||L.focus()})),!S&&i&&(i=!1,t("close"))}),ue({popupRef:c}),fn(c,()=>e.show&&e.lockScroll),Ce("popstate",()=>{e.closeOnPopstate&&(r(),a=!1)}),re(()=>{e.show&&v()}),Ee(()=>{a&&(t("update:show",!0),a=!1)}),Pe(()=>{e.show&&e.teleport&&(r(),a=!0)}),je(nt,()=>e.show),()=>e.teleport?u(xt,{to:e.teleport},{default:()=>[x(),k()]}):u(bt,null,[x(),k()])}});const Sn=N(bn);function Pn(){const e=U({show:!1}),t=i=>{e.show=i},o=i=>{G(e,i,{transitionAppear:!0}),t(!0)},n=()=>t(!1);return ue({open:o,close:n,toggle:t}),{open:o,close:n,state:e,toggle:t}}function Cn(e){const t=Pt(e),o=document.createElement("div");return document.body.appendChild(o),{instance:t.mount(o),unmount(){t.unmount(),document.body.removeChild(o)}}}const[In,J]=M("image"),Tn={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:O,height:O,radius:O,lazyLoad:Boolean,iconSize:O,showError:B,errorIcon:R("photo-fail"),iconPrefix:String,showLoading:B,loadingIcon:R("photo")};var $n=p({name:In,props:Tn,emits:["load","error"],setup(e,{emit:t,slots:o}){const n=I(!1),i=I(!0),a=I(),{$Lazyload:l}=ce().proxy,c=P(()=>{const f={width:F(e.width),height:F(e.height)};return le(e.radius)&&(f.overflow="hidden",f.borderRadius=F(e.radius)),f});_(()=>e.src,()=>{n.value=!1,i.value=!0});const h=f=>{i.value=!1,t("load",f)},s=f=>{n.value=!0,i.value=!1,t("error",f)},v=(f,g,T)=>T?T():u(Ie,{name:f,size:e.iconSize,class:g,classPrefix:e.iconPrefix},null),r=()=>{if(i.value&&e.showLoading)return u("div",{class:J("loading")},[v(e.loadingIcon,J("loading-icon"),o.loading)]);if(n.value&&e.showError)return u("div",{class:J("error")},[v(e.errorIcon,J("error-icon"),o.error)])},m=()=>{if(n.value||!e.src)return;const f={alt:e.alt,class:J("img"),style:{objectFit:e.fit,objectPosition:e.position}};return e.lazyLoad?_e(u("img",ee({ref:a},f),null),[[Ct("lazy"),e.src]]):u("img",ee({src:e.src,onLoad:h,onError:s},f),null)},x=({el:f})=>{const g=()=>{f===a.value&&i.value&&h()};a.value?g():ne(g)},w=({el:f})=>{f===a.value&&!n.value&&s()};return l&&Ke&&(l.$on("loaded",x),l.$on("error",w),Be(()=>{l.$off("loaded",x),l.$off("error",w)})),()=>{var f;return u("div",{class:J({round:e.round,block:e.block}),style:c.value},[m(),r(),(f=o.default)==null?void 0:f.call(o)])}}});const kn=N($n),[it,ge]=M("swipe"),zn={loop:B,width:O,height:O,vertical:Boolean,autoplay:H(0),duration:H(500),touchable:B,lazyRender:Boolean,initialSwipe:H(0),indicatorColor:String,showIndicators:B,stopPropagation:B},st=Symbol(it);var On=p({name:it,props:zn,emits:["change"],setup(e,{emit:t,slots:o}){const n=I(),i=I(),a=U({rect:null,width:0,height:0,offset:0,active:0,swiping:!1}),l=Ae(),{children:c,linkChildren:h}=_t(st),s=P(()=>c.length),v=P(()=>a[e.vertical?"height":"width"]),r=P(()=>e.vertical?l.deltaY.value:l.deltaX.value),m=P(()=>a.rect?(e.vertical?a.rect.height:a.rect.width)-v.value*s.value:0),x=P(()=>Math.ceil(Math.abs(m.value)/v.value)),w=P(()=>s.value*v.value),f=P(()=>(a.active+s.value)%s.value),g=P(()=>{const y=e.vertical?"vertical":"horizontal";return l.direction.value===y}),T=P(()=>{const y={transitionDuration:`${a.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${a.offset}px)`};if(v.value){const E=e.vertical?"height":"width",z=e.vertical?"width":"height";y[E]=`${w.value}px`,y[z]=e[z]?`${e[z]}px`:""}return y}),$=y=>{const{active:E}=a;return y?e.loop?V(E+y,-1,s.value):V(E+y,0,x.value):E},X=(y,E=0)=>{let z=y*v.value;e.loop||(z=Math.min(z,-m.value));let D=E-z;return e.loop||(D=V(D,m.value,0)),D},k=({pace:y=0,offset:E=0,emitChange:z})=>{if(s.value<=1)return;const{active:D}=a,A=$(y),ae=X(A,E);if(e.loop){if(c[0]&&ae!==m.value){const $e=ae<m.value;c[0].setOffset($e?w.value:0)}if(c[s.value-1]&&ae!==0){const $e=ae>0;c[s.value-1].setOffset($e?-w.value:0)}}a.active=A,a.offset=ae,z&&A!==D&&t("change",f.value)},S=()=>{a.swiping=!0,a.active<=-1?k({pace:s.value}):a.active>=s.value&&k({pace:-s.value})},L=()=>{S(),l.reset(),ve(()=>{a.swiping=!1,k({pace:-1,emitChange:!0})})},W=()=>{S(),l.reset(),ve(()=>{a.swiping=!1,k({pace:1,emitChange:!0})})};let j;const d=()=>clearTimeout(j),b=()=>{d(),e.autoplay>0&&s.value>1&&(j=setTimeout(()=>{W(),b()},+e.autoplay))},C=(y=+e.initialSwipe)=>{if(!n.value)return;const E=()=>{var z,D;if(!pe(n)){const A={width:n.value.offsetWidth,height:n.value.offsetHeight};a.rect=A,a.width=+((z=e.width)!=null?z:A.width),a.height=+((D=e.height)!=null?D:A.height)}s.value&&(y=Math.min(s.value-1,y)),a.active=y,a.swiping=!0,a.offset=X(y),c.forEach(A=>{A.setOffset(0)}),b()};pe(n)?ne().then(E):E()},Y=()=>C(a.active);let Z;const K=y=>{!e.touchable||(l.start(y),Z=Date.now(),d(),S())},Te=y=>{e.touchable&&a.swiping&&(l.move(y),g.value&&(!e.loop&&(a.active===0&&r.value>0||a.active===s.value-1&&r.value<0)||(te(y,e.stopPropagation),k({offset:r.value}))))},de=()=>{if(!e.touchable||!a.swiping)return;const y=Date.now()-Z,E=r.value/y;if((Math.abs(E)>.25||Math.abs(r.value)>v.value/2)&&g.value){const D=e.vertical?l.offsetY.value:l.offsetX.value;let A=0;e.loop?A=D>0?r.value>0?-1:1:0:A=-Math[r.value>0?"ceil":"floor"](r.value/v.value),k({pace:A,emitChange:!0})}else r.value&&k({pace:0});a.swiping=!1,b()},rt=(y,E={})=>{S(),l.reset(),ve(()=>{let z;e.loop&&y===s.value?z=a.active===0?0:y:z=y%s.value,E.immediate?ve(()=>{a.swiping=!1}):a.swiping=!1,k({pace:z-a.active,emitChange:!0})})},ct=(y,E)=>{const z=E===f.value,D=z?{backgroundColor:e.indicatorColor}:void 0;return u("i",{style:D,class:ge("indicator",{active:z})},null)},ut=()=>{if(o.indicator)return o.indicator({active:f.value,total:s.value});if(e.showIndicators&&s.value>1)return u("div",{class:ge("indicators",{vertical:e.vertical})},[Array(s.value).fill("").map(ct)])};return ue({prev:L,next:W,state:a,resize:Y,swipeTo:rt}),h({size:v,props:e,count:s,activeIndicator:f}),_(()=>e.initialSwipe,y=>C(+y)),_(s,()=>C(a.active)),_(()=>e.autoplay,b),_([Je,Qe],Y),_(Yt(),y=>{y==="visible"?b():d()}),re(C),Ee(()=>C(a.active)),Ht(()=>C(a.active)),Pe(d),Be(d),Ce("touchmove",Te,{target:i}),()=>{var y;return u("div",{ref:n,class:ge()},[u("div",{ref:i,style:T.value,class:ge("track",{vertical:e.vertical}),onTouchstartPassive:K,onTouchend:de,onTouchcancel:de},[(y=o.default)==null?void 0:y.call(o)]),ut()])}}});const En=N(On),[Rn,Bn]=M("swipe-item");var _n=p({name:Rn,setup(e,{slots:t}){let o;const n=U({offset:0,inited:!1,mounted:!1}),{parent:i,index:a}=Et(st);if(!i)return;const l=P(()=>{const s={},{vertical:v}=i.props;return i.size.value&&(s[v?"height":"width"]=`${i.size.value}px`),n.offset&&(s.transform=`translate${v?"Y":"X"}(${n.offset}px)`),s}),c=P(()=>{const{loop:s,lazyRender:v}=i.props;if(!v||o)return!0;if(!n.mounted)return!1;const r=i.activeIndicator.value,m=i.count.value-1,x=r===0&&s?m:r-1,w=r===m&&s?0:r+1;return o=a.value===r||a.value===x||a.value===w,o}),h=s=>{n.offset=s};return re(()=>{ne(()=>{n.mounted=!0})}),ue({setOffset:h}),()=>{var s;return u("div",{class:Bn(),style:l.value},[c.value?(s=t.default)==null?void 0:s.call(t):null])}}});const An=N(_n),[Ln,ye]=M("circle");let Dn=0;const He=e=>Math.min(Math.max(+e,0),100);function Mn(e,t){const o=e?1:0;return`M ${t/2} ${t/2} m 0, -500 a 500, 500 0 1, ${o} 0, 1000 a 500, 500 0 1, ${o} 0, -1000`}const pn={text:String,size:O,fill:R("none"),rate:H(100),speed:H(0),color:[String,Object],clockwise:B,layerColor:String,currentRate:It(0),strokeWidth:H(40),strokeLinecap:String,startPosition:R("top")};var Yn=p({name:Ln,props:pn,emits:["update:currentRate"],setup(e,{emit:t,slots:o}){const n=`van-circle-${Dn++}`,i=P(()=>+e.strokeWidth+1e3),a=P(()=>Mn(e.clockwise,i.value)),l=P(()=>{const m={top:0,right:90,bottom:180,left:270}[e.startPosition];if(m)return{transform:`rotate(${m}deg)`}});_(()=>e.rate,r=>{let m;const x=Date.now(),w=e.currentRate,f=He(r),g=Math.abs((w-f)*1e3/+e.speed),T=()=>{const $=Date.now(),k=Math.min(($-x)/g,1)*(f-w)+w;t("update:currentRate",He(parseFloat(k.toFixed(1)))),(f>w?k<f:k>f)&&(m=Se(T))};e.speed?(m&&kt(m),m=Se(T)):t("update:currentRate",f)},{immediate:!0});const c=()=>{const{strokeWidth:m,currentRate:x,strokeLinecap:w}=e,f=3140*x/100,g=Le(e.color)?`url(#${n})`:e.color,T={stroke:g,strokeWidth:`${+m+1}px`,strokeLinecap:w,strokeDasharray:`${f}px ${3140}px`};return u("path",{d:a.value,style:T,class:ye("hover"),stroke:g},null)},h=()=>{const r={fill:e.fill,stroke:e.layerColor,strokeWidth:`${e.strokeWidth}px`};return u("path",{class:ye("layer"),style:r,d:a.value},null)},s=()=>{const{color:r}=e;if(!Le(r))return;const m=Object.keys(r).sort((x,w)=>parseFloat(x)-parseFloat(w)).map((x,w)=>u("stop",{key:w,offset:x,"stop-color":r[x]},null));return u("defs",null,[u("linearGradient",{id:n,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},[m])])},v=()=>{if(o.default)return o.default();if(e.text)return u("div",{class:ye("text")},[e.text])};return()=>u("div",{class:ye(),style:Ve(e.size)},[u("svg",{viewBox:`0 0 ${i.value} ${i.value}`,style:l.value},[s(),h(),c()]),v()])}});const Un=N(Yn),Ze=e=>Math.sqrt((e[0].clientX-e[1].clientX)**2+(e[0].clientY-e[1].clientY)**2),ze=M("image-preview")[1];var Nn=p({props:{src:String,show:Boolean,active:Number,minZoom:fe(O),maxZoom:fe(O),rootWidth:fe(Number),rootHeight:fe(Number)},emits:["scale","close"],setup(e,{emit:t,slots:o}){const n=U({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,imageRatio:0,displayWidth:0,displayHeight:0}),i=Ae(),a=I(),l=P(()=>{const{rootWidth:d,rootHeight:b}=e,C=b/d;return n.imageRatio>C}),c=P(()=>{const{scale:d,moveX:b,moveY:C,moving:Y,zooming:Z}=n,K={transitionDuration:Z||Y?"0s":".3s"};if(d!==1){const Te=b/d,de=C/d;K.transform=`scale(${d}, ${d}) translate(${Te}px, ${de}px)`}return K}),h=P(()=>{if(n.imageRatio){const{rootWidth:d,rootHeight:b}=e,C=l.value?b/n.imageRatio:d;return Math.max(0,(n.scale*C-d)/2)}return 0}),s=P(()=>{if(n.imageRatio){const{rootWidth:d,rootHeight:b}=e,C=l.value?b:d*n.imageRatio;return Math.max(0,(n.scale*C-b)/2)}return 0}),v=d=>{d=V(d,+e.minZoom,+e.maxZoom+1),d!==n.scale&&(n.scale=d,t("scale",{scale:d,index:e.active}))},r=()=>{v(1),n.moveX=0,n.moveY=0},m=()=>{const d=n.scale>1?1:2;v(d),n.moveX=0,n.moveY=0};let x,w,f,g,T,$,X;const k=d=>{const{touches:b}=d,{offsetX:C}=i;i.start(d),x=b.length,w=n.moveX,f=n.moveY,X=Date.now(),n.moving=x===1&&n.scale!==1,n.zooming=x===2&&!C.value,n.zooming&&(g=n.scale,T=Ze(d.touches))},S=d=>{const{touches:b}=d;if(i.move(d),(n.moving||n.zooming)&&te(d,!0),n.moving){const{deltaX:C,deltaY:Y}=i,Z=C.value+w,K=Y.value+f;n.moveX=V(Z,-h.value,h.value),n.moveY=V(K,-s.value,s.value)}if(n.zooming&&b.length===2){const C=Ze(b),Y=g*C/T;v(Y)}},L=()=>{if(x>1)return;const{offsetX:d,offsetY:b}=i,C=Date.now()-X,Y=250,Z=5;d.value<Z&&b.value<Z&&C<Y&&($?(clearTimeout($),$=null,m()):$=setTimeout(()=>{t("close"),$=null},Y))},W=d=>{let b=!1;(n.moving||n.zooming)&&(b=!0,n.moving&&w===n.moveX&&f===n.moveY&&(b=!1),d.touches.length||(n.zooming&&(n.moveX=V(n.moveX,-h.value,h.value),n.moveY=V(n.moveY,-s.value,s.value),n.zooming=!1),n.moving=!1,w=0,f=0,g=1,n.scale<1&&r(),n.scale>e.maxZoom&&(n.scale=+e.maxZoom))),te(d,b),L(),i.reset()},j=d=>{const{naturalWidth:b,naturalHeight:C}=d.target;n.imageRatio=C/b};return _(()=>e.active,r),_(()=>e.show,d=>{d||r()}),Ce("touchmove",S,{target:P(()=>{var d;return(d=a.value)==null?void 0:d.$el})}),()=>{const d={loading:()=>u(ot,{type:"spinner"},null)};return u(An,{ref:a,class:ze("swipe-item"),onTouchstartPassive:k,onTouchend:W,onTouchcancel:W},{default:()=>[o.image?u("div",{class:ze("image-wrap")},[o.image({src:e.src})]):u(kn,{src:e.src,fit:"contain",class:ze("image",{vertical:l.value}),style:c.value,onLoad:j},d)]})}}});const[Xn,Q]=M("image-preview"),Wn=["show","transition","overlayStyle","closeOnPopstate"],Hn={show:Boolean,loop:B,images:$t(),minZoom:H(1/3),maxZoom:H(3),overlay:B,closeable:Boolean,showIndex:B,className:be,closeIcon:R("clear"),transition:String,beforeClose:Function,overlayClass:be,overlayStyle:Object,swipeDuration:H(300),startPosition:H(0),showIndicators:Boolean,closeOnPopstate:B,closeIconPosition:R("top-right")};var lt=p({name:Xn,props:Hn,emits:["scale","close","closed","change","update:show"],setup(e,{emit:t,slots:o}){const n=I(),i=U({active:0,rootWidth:0,rootHeight:0}),a=()=>{if(n.value){const g=Ot(n.value.$el);i.rootWidth=g.width,i.rootHeight=g.height,n.value.resize()}},l=g=>t("scale",g),c=g=>t("update:show",g),h=()=>{tt(e.beforeClose,{args:[i.active],done:()=>c(!1)})},s=g=>{g!==i.active&&(i.active=g,t("change",g))},v=()=>{if(e.showIndex)return u("div",{class:Q("index")},[o.index?o.index({index:i.active}):`${i.active+1} / ${e.images.length}`])},r=()=>{if(o.cover)return u("div",{class:Q("cover")},[o.cover()])},m=()=>u(En,{ref:n,lazyRender:!0,loop:e.loop,class:Q("swipe"),duration:e.swipeDuration,initialSwipe:e.startPosition,showIndicators:e.showIndicators,indicatorColor:"white",onChange:s},{default:()=>[e.images.map(g=>u(Nn,{src:g,show:e.show,active:i.active,maxZoom:e.maxZoom,minZoom:e.minZoom,rootWidth:i.rootWidth,rootHeight:i.rootHeight,onScale:l,onClose:h},{image:o.image}))]}),x=()=>{if(e.closeable)return u(Ie,{role:"button",name:e.closeIcon,class:[Q("close-icon",e.closeIconPosition),et],onClick:h},null)},w=()=>t("closed"),f=(g,T)=>{var $;return($=n.value)==null?void 0:$.swipeTo(g,T)};return ue({swipeTo:f}),re(a),_([Je,Qe],a),_(()=>e.startPosition,g=>s(+g)),_(()=>e.show,g=>{const{images:T,startPosition:$}=e;g?(s(+$),ne(()=>{a(),f(+$,{immediate:!0})})):t("close",{index:i.active,url:T[i.active]})}),()=>u(Sn,ee({class:[Q(),e.className],overlayClass:[Q("overlay"),e.overlayClass],onClosed:w,"onUpdate:show":c},Tt(e,Wn)),{default:()=>[x(),m(),v(),r()]})}});let we;const Zn={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeIconPosition:"top-right"};function Fn(){({instance:we}=Cn({setup(){const{state:e,toggle:t}=Pn(),o=()=>{e.images=[]};return()=>u(lt,ee(e,{onClosed:o,"onUpdate:show":t}),null)}}))}const Oe=(e,t=0)=>{if(!!Ke)return we||Fn(),e=Array.isArray(e)?{images:e,startPosition:t}:e,we.open(G({},Zn,e)),we};Oe.Component=N(lt);Oe.install=e=>{e.use(Oe.Component)};export{Vn as B,Un as C,Oe as I,ot as L,yn as O,Sn as P,kn as a,Ie as b,Cn as m,Pn as u};
